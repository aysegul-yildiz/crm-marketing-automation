{% extends "base.html" %}
{% block content %}
<div style="max-width: 600px; margin: 0 auto;">

  <h2>Create New Campaign</h2>
  <hr />

  <!-- Campaign Form -->
  <form action="{{ url_for('campaign.create_campaign') }}" method="POST">
    <label for="name">Campaign Name:</label>
    <input type="text" id="name" name="name" required>

    <label for="status">Status:</label>
    <select id="status" name="status" required>
        <option value="PLANNED">Planned</option>
        <option value="ACTIVE">Active</option>
        <option value="CLOSED">Closed</option>
    </select>

    <button type="submit" class="btn-primary-pill btn-pill">
      Create Campaign
    </button>
  </form>

  <hr>

  <!-- Filter -->
  <form method="GET" action="{{ url_for('campaign.new_campaign') }}">
    <label for="filter">Filter by status:</label>
    <select name="status" onchange="this.form.submit()">
      <option value=""   {% if selected_status == '' %}selected{% endif %}>All</option>
      <option value="PLANNED" {% if selected_status == 'PLANNED' %}selected{% endif %}>Planned</option>
      <option value="ACTIVE"  {% if selected_status == 'ACTIVE' %}selected{% endif %}>Active</option>
      <option value="CLOSED"  {% if selected_status == 'CLOSED' %}selected{% endif %}>Closed</option>
    </select>
  </form>

  <!-- Campaign List -->
    <form method="GET" action="{{ url_for('campaign.edit_campaign') }}">
    <div style="margin-top: 20px; max-height: 250px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 6px;">

        {% for campaign in campaigns %}
        <label style="display: block; padding: 10px 0; border-bottom: 1px solid #eee;">
            <input type="radio" name="campaign_id" value="{{ campaign.id }}" required>
            <strong>{{ campaign.name }}</strong> â€” <span>{{ campaign.status }}</span>
        </label>
        {% else %}
        <p>No campaigns found.</p>
        {% endfor %}

    </div>

    <button type="submit" class="btn-outline-pill btn-pill" style="margin-top: 10px;">
        Edit Selected Campaign
    </button>
    </form>


</div>
{% endblock %}
